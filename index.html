<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù†Øµ Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ø¥Ù„Ù‰ ÙƒÙ„Ø§Ù…</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
    font-family:Tahoma;
    background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    margin:0;
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    direction:rtl;
}
.app{
    background:#fff;
    width:95%;
    max-width:550px;
    padding:20px;
    border-radius:18px;
    box-shadow:0 20px 40px rgba(0,0,0,.35);
}
h1{text-align:center;margin-bottom:10px}
textarea{
    width:100%;
    height:140px;
    border-radius:12px;
    border:1px solid #ccc;
    padding:12px;
    font-size:16px;
}
select,button{
    width:100%;
    margin-top:10px;
    padding:12px;
    font-size:16px;
    border-radius:12px;
}
button{
    background:#00796b;
    color:#fff;
    border:none;
    cursor:pointer;
}
button:hover{background:#004d40}
.status{
    text-align:center;
    margin-top:10px;
    font-size:14px;
}
</style>
</head>

<body>

<div class="app">
<h1>ğŸ”Š ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù†Øµ Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ø¥Ù„Ù‰ ÙƒÙ„Ø§Ù…</h1>

<textarea id="text" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ù†Øµ Ù‡Ù†Ø§..."></textarea>

<select id="voice"></select>

<button onclick="speak()">â–¶ ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª</button>
<button onclick="stop()">â¹ Ø¥ÙŠÙ‚Ø§Ù</button>

<div class="status" id="status">Ø¬Ø§Ù‡Ø²</div>
</div>

<script>
const synth = speechSynthesis;
const voiceSelect = document.getElementById("voice");
const status = document.getElementById("status");
let voices = [];

function loadVoices(){
    voices = synth.getVoices();

    voiceSelect.innerHTML = "";
    voices
      .filter(v => v.lang.startsWith("ar"))
      .forEach((v,i)=>{
        const opt = document.createElement("option");
        opt.value = voices.indexOf(v);
        opt.text = v.lang.includes("EG") 
          ? "ğŸ‡ªğŸ‡¬ Ø¹Ø±Ø¨ÙŠ Ù…ØµØ±ÙŠ"
          : v.lang + " - " + v.name;
        voiceSelect.appendChild(opt);
      });

    if(!voiceSelect.options.length){
        const opt = document.createElement("option");
        opt.text = "âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØµÙˆØª Ø¹Ø±Ø¨ÙŠ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ";
        voiceSelect.appendChild(opt);
    }
}

loadVoices();
speechSynthesis.onvoiceschanged = loadVoices;

function speak(){
    const text = document.getElementById("text").value.trim();
    if(!text){ alert("Ø§ÙƒØªØ¨ Ù†ØµÙ‹Ø§"); return; }

    const utter = new SpeechSynthesisUtterance(text);
    const v = voices[voiceSelect.value];
    if(v) utter.voice = v;

    utter.lang = v ? v.lang : "ar-SA";

    utter.onstart = ()=> status.innerText = "ğŸ”Š Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©...";
    utter.onend = ()=> status.innerText = "âœ… Ø§Ù†ØªÙ‡Ù‰";
    utter.onerror = ()=> status.innerText = "âŒ Ø®Ø·Ø£";

    synth.cancel();
    synth.speak(utter);
}

function stop(){
    synth.cancel();
    status.innerText = "â¹ ØªÙ… Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù";
}
</script>

</body>
</html>
