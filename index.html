<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>ØµØ§Ù†Ø¹ Ø§Ù„Ø£Ø¨Ø·Ø§Ù„ ğŸ† | Ø§Ø¶ØºØ· ÙˆØªØ­Ø¯Ù‰</title>
  <!-- Cairo font & additional flair -->
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet" />
  <!-- Font Awesome 6 (icons) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      user-select: none;
    }

    body {
      font-family: 'Cairo', sans-serif;
      background: radial-gradient(circle at 20% 30%, #0b1c2f, #0a121c);
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      padding: 16px;
    }

    .game {
      background: rgba(12, 25, 45, 0.75);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 2px solid rgba(255, 215, 0, 0.3);
      padding: 28px 20px;
      border-radius: 56px;
      text-align: center;
      width: 100%;
      max-width: 480px;
      box-shadow: 0 25px 45px rgba(0,0,0,0.6), 0 0 0 2px rgba(255,215,0,0.1) inset;
      transition: all 0.2s;
    }

    h1 {
      font-size: 2.1rem;
      font-weight: 900;
      margin-bottom: 4px;
      letter-spacing: 2px;
      text-shadow: 0 0 15px #ffd966, 0 0 30px #f0b400;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
    }
    h1 i {
      font-size: 2.4rem;
      color: #ffd966;
      filter: drop-shadow(0 0 8px gold);
    }

    .sub {
      font-size: 1.1rem;
      opacity: 0.9;
      margin-bottom: 20px;
      background: rgba(0,0,0,0.3);
      padding: 10px 18px;
      border-radius: 60px;
      display: inline-block;
      border: 1px solid #ffd96677;
    }

    /* Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª â€“ premium glassmorphism */
    .stats-panel {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: rgba(10, 20, 35, 0.7);
      border-radius: 120px;
      padding: 12px 20px;
      margin: 16px 0 10px;
      border: 1px solid rgba(255,200,50,0.4);
      box-shadow: 0 5px 15px #00000040;
    }

    .score, .best {
      font-size: 1.3rem;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .score i, .best i, .timer i {
      font-size: 1.6rem;
      color: #ffbf00;
      text-shadow: 0 0 8px #ffaa33;
    }

    /* Ø²Ø± Ø§Ù„Ø¶ØºØ· Ø§Ù„Ø£Ø³Ø·ÙˆØ±ÙŠ */
    .click-area {
      margin: 24px 0 16px;
    }
    #clickBtn {
      background: radial-gradient(circle at 30% 20%, #ffe484, #ffb700);
      color: #0a0f1a;
      border: none;
      width: 170px;
      height: 170px;
      border-radius: 50%;
      font-size: 2rem;
      font-weight: 900;
      box-shadow: 0 20px 25px #00000055, 0 0 0 6px #ffd96655, 0 0 0 12px #ffb70022;
      cursor: pointer;
      transition: 0.06s ease-out;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin: 0 auto;
      border: 3px solid white;
    }
    #clickBtn i {
      font-size: 3.5rem;
      margin-bottom: 6px;
      color: #1f2a44;
      text-shadow: 0 2px 5px white;
    }
    #clickBtn span {
      background: #0a121fb0;
      color: white;
      padding: 5px 14px;
      border-radius: 60px;
      font-size: 1.2rem;
      margin-top: 5px;
      border: 1px solid gold;
    }
    #clickBtn:active {
      transform: scale(0.88);
      box-shadow: 0 10px 15px black, 0 0 0 10px #ffbf00aa, 0 0 0 18px #ffd96655;
    }
    #clickBtn:disabled {
      opacity: 0.55;
      transform: scale(0.95);
      box-shadow: 0 5px 10px black, 0 0 0 4px gray;
      filter: grayscale(50%);
    }

    /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø«Ø§Ù†ÙˆÙŠØ© Ø¨ØªØµÙ…ÙŠÙ… ÙØ§Ø®Ø± */
    .action-buttons {
      display: flex;
      justify-content: center;
      gap: 18px;
      margin: 12px 0 5px;
    }
    .ctrl-btn {
      background: rgba(20, 40, 60, 0.9);
      border: 1.5px solid #ffcd7e;
      color: #ffe6b3;
      padding: 12px 22px;
      border-radius: 50px;
      font-size: 1.15rem;
      font-weight: bold;
      cursor: pointer;
      transition: 0.15s;
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      gap: 10px;
      box-shadow: 0 5px 0 #0f1a24;
    }
    .ctrl-btn i {
      font-size: 1.25rem;
      color: #ffcd7e;
    }
    .ctrl-btn:hover {
      background: #1f405e;
      border-color: #ffbc3b;
      color: white;
      transform: translateY(-3px);
      box-shadow: 0 8px 0 #0f1a24;
    }
    .ctrl-btn:active { transform: translateY(3px); box-shadow: 0 2px 0 #0f1a24; }

    /* Ø¹Ø¯Ø§Ø¯ Ø§Ù„ÙˆÙ‚Øª + Ø´Ø±ÙŠØ· ØªÙ‚Ø¯Ù… */
    .timer-section {
      background: #0a121fd9;
      padding: 16px 16px 12px;
      border-radius: 80px;
      margin-top: 18px;
      border: 1px solid #f6c445;
    }
    .timer {
      font-size: 1.8rem;
      font-weight: 800;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    #time {
      background: #00000060;
      padding: 6px 20px;
      border-radius: 60px;
      box-shadow: inset 0 0 12px black;
      color: #ffd966;
      font-size: 2.1rem;
    }
    .progress-bar {
      width: 100%;
      height: 12px;
      background: #2f4057;
      border-radius: 20px;
      margin-top: 12px;
      overflow: hidden;
    }
    #progressFill {
      height: 100%;
      width: 100%;
      background: linear-gradient(90deg, #ffb82e, #ffe174);
      border-radius: 20px;
      transition: width 0.2s linear;
      box-shadow: 0 0 12px #ffbf00;
    }

    /* ÙƒÙˆÙ…Ø¨Ùˆ Ù…ØªÙˆÙ‡Ø¬ */
    .combo-container {
      margin: 6px 0 0;
      font-size: 1.5rem;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 12px;
      background: #101e2cb0;
      padding: 6px 18px;
      border-radius: 50px;
      border: 1px dashed #ffc107;
    }
    #comboDisplay {
      background: #c78d0b;
      color: #0a0f1a;
      padding: 0px 18px;
      border-radius: 40px;
      font-weight: 900;
      font-size: 1.8rem;
      line-height: 1.6;
      min-width: 80px;
      text-shadow: 0 0 8px white;
    }
    .fire {
      animation: pulse 0.3s ease;
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.2); text-shadow: 0 0 30px gold; }
    }

    /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© */
    .floating-effect {
      position: fixed;
      pointer-events: none;
      font-weight: 900;
      font-size: 2rem;
      text-shadow: 0 0 20px orange;
    }

    /* responsive */
    @media (max-width: 420px) {
      .game { padding: 18px; }
      #clickBtn { width: 140px; height: 140px; font-size: 1.6rem; }
    }
  </style>
</head>
<body>

<div class="game">
  <h1>
    <i class="fas fa-crown"></i> ØµØ§Ù†Ø¹ Ø§Ù„Ø£Ø¨Ø·Ø§Ù„
    <i class="fas fa-bolt"></i>
  </h1>
  <div class="sub">
    <i class="fas fa-gamepad"></i> Ø§Ø¶ØºØ· Ø¨Ø°ÙƒØ§Ø¡ .. Ø­Ù‚Ù‚ Ø§Ù„Ù…Ø¬Ø¯
  </div>

  <!-- Ø¨Ø·Ø§Ù‚Ø© Ø£ÙØ¶Ù„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙˆØ§Ù„Ù†Ù‚Ø§Ø· -->
  <div class="stats-panel">
    <div class="score">
      <i class="fas fa-star"></i> 
      <span id="score">0</span>
    </div>
    <div class="best">
      <i class="fas fa-trophy"></i> 
      <span id="best">0</span>
    </div>
  </div>

  <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¨Ø·Ù„ (Ø§Ù„Ø²Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ) -->
  <div class="click-area">
    <button id="clickBtn">
      <i class="fas fa-hand-fist"></i>
      <span>Ø§Ù‚Ù‡Ø±Ù†ÙŠ!</span>
    </button>
  </div>

  <!-- Ù†Ø¸Ø§Ù… Ø§Ù„ÙƒÙˆÙ…Ø¨Ùˆ Ø§Ù„Ù…ØªØ·ÙˆØ± + Ù…Ø¤Ø´Ø± Ø§Ù„Ø¶Ø±Ø¨Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø© -->
  <div class="combo-container">
    <i class="fas fa-fire" style="color: #ff8c00;"></i>
    <span style="font-weight: bold;">Ø§Ù„Ø¶Ø±Ø¨Ø§Øª Ø§Ù„Ù…ØªØªØ§Ù„ÙŠØ©</span>
    <span id="comboDisplay">0</span>
    <i class="fas fa-angle-double-right"></i>
    <span id="comboBonus" style="background: #ffd96633; padding: 5px 12px; border-radius: 50px;">Ã—1</span>
  </div>

  <!-- Ø§Ù„Ù…Ø¤Ù‚Øª Ø§Ù„Ù…ØªØ·ÙˆØ± + Ø´Ø±ÙŠØ· Ø§Ù„ØªØ­Ù…ÙŠÙ„ -->
  <div class="timer-section">
    <div class="timer">
      <i class="fas fa-hourglass-half"></i>
      <span id="time">10</span>
      <span>Ø«Ø§Ù†ÙŠØ©</span>
    </div>
    <div class="progress-bar">
      <div id="progressFill" style="width: 100%;"></div>
    </div>
  </div>
  
  <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø°ÙƒÙŠØ© -->
  <div class="action-buttons">
    <button id="resetBtn" class="ctrl-btn"><i class="fas fa-rotate-right"></i> ØªØ­Ø¯Ù‰ Ù…Ù† Ø¬Ø¯ÙŠØ¯</button>
    <button id="hardModeBtn" class="ctrl-btn"><i class="fas fa-skull"></i> Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ØµØ¹Ø¨</button>
  </div>
  <p style="margin-top: 12px; font-size: 0.8rem; opacity: 0.7;"><i class="fas fa-headphones"></i> Ù…Ø¹Ø²Ø²Ø§Øª ØµÙˆØªÙŠØ© â€¢ ØªØªØ¨Ø¹ Ø§Ù„Ø£Ø¯Ø§Ø¡ â€¢ ØªØ­Ø¯ÙŠØ§Øª Ù…Ø°Ù‡Ù„Ø©</p>
</div>

<script>
  (function() {
    "use strict";

    // =============== Ø¨Ù†ÙŠØ© Ù…ØªØ·ÙˆØ±Ø© Ø¨ÙƒÙ„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¥Ø«Ø§Ø±Ø© ===============
    let score = 0;
    let time = 10;
    let started = false;
    let timerInterval = null;
    let bestScore = parseInt(localStorage.getItem('bestScore_Ultimate')) || 0;

    // Ù†Ø¸Ø§Ù… Ø§Ù„ÙƒÙˆÙ…Ø¨Ùˆ Ø§Ù„Ø°ÙƒÙŠ
    let clickCounter = 0;          // Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ù‚Ø±Ø§Øª Ø§Ù„Ù…ØªØªØ§Ù„ÙŠØ© Ø¯ÙˆÙ† ØªÙˆÙ‚Ù
    let maxCombo = 0;            // Ø£Ø¹Ù„Ù‰ ÙƒÙˆÙ…Ø¨Ùˆ Ø®Ù„Ø§Ù„ Ø§Ù„Ø¬ÙˆÙ„Ø©
    let comboMultiplier = 1;     // Ø§Ù„Ù…Ø¶Ø§Ø¹Ù (ÙƒÙ„ 7 Ù†Ù‚Ø±Ø§Øª â†’ Ã—2 , ÙƒÙ„ 15 â†’ Ã—3 ..)
    let lastClickTime = 0;       // Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† Ø§Ù„Ù†Ù‚Ø±Ø§Øª (ÙƒØ´Ù Ø§Ù„Ø³Ø±Ø¹Ø©)
    let clickSpeedBonus = 1;     // Ù…Ø¹Ø§Ù…Ù„ Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ø¥Ø¶Ø§ÙÙŠ

    // Ø¹Ù†Ø§ØµØ± DOM
    const scoreEl = document.getElementById('score');
    const timeEl = document.getElementById('time');
    const btn = document.getElementById('clickBtn');
    const resetBtn = document.getElementById('resetBtn');
    const bestEl = document.getElementById('best');
    const progressFill = document.getElementById('progressFill');
    const comboDisplay = document.getElementById('comboDisplay');
    const comboBonusEl = document.getElementById('comboBonus');
    const hardModeBtn = document.getElementById('hardModeBtn');

    // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ØµØ¹Ø¨
    let hardModeActive = false;
    let timePenaltyActive = false;   // ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ØµØ¹Ø¨ ÙƒÙ„ Ø¶Ø±Ø¨Ø© ØªÙ†Ù‚Øµ 0.1 Ø«Ø§Ù†ÙŠØ©? Ø³ÙŠÙƒÙˆÙ† ØªÙØ§Ø¹Ù„ÙŠØ§Ù‹

    // Ø£ØµÙˆØ§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ, Web Audio API Ù„Ù…Ø­Ø§ÙƒØ§Ø© ØªØ¬Ø±Ø¨Ø© immersive Ø¨Ø¯ÙˆÙ† Ù…Ù„ÙØ§Øª)
    let audioCtx = null;
    function playClickSound(intensity = 1) {
      if (!audioCtx) {
        try {
          audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        } catch(e) { return; }
      }
      if (audioCtx.state === 'suspended') audioCtx.resume();
      const osc = audioCtx.createOscillator();
      const gainNode = audioCtx.createGain();
      osc.type = 'sine';
      osc.frequency.value = 600 + intensity * 200; // ÙƒÙ„Ù…Ø§ Ø²Ø§Ø¯ Ø§Ù„ÙƒÙˆÙ…Ø¨Ùˆ Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ù†ØºÙ…Ø©
      gainNode.gain.value = 0.08 + (comboMultiplier * 0.03);
      osc.connect(gainNode);
      gainNode.connect(audioCtx.destination);
      osc.start();
      osc.stop(0.08);
    }

    // ØªÙ‡ÙŠØ¦Ø© Ø£ÙØ¶Ù„ Ù†ØªÙŠØ¬Ø©
    bestEl.textContent = bestScore;

    // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ÙƒÙˆÙ…Ø¨Ùˆ
    function updateComboUI() {
      // Ù…Ø¶Ø§Ø¹Ù Ø­Ø³Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ù‚Ø±Ø§Øª: ÙƒÙ„ 7 Ù†Ù‚Ø±Ø§Øª ÙŠØ²ÙŠØ¯ Ø§Ù„Ù…Ø¶Ø§Ø¹Ù 0.25? Ù†ØµÙ†Ø¹ Ù…ØªØ¹Ø©
      if (clickCounter >= 20) comboMultiplier = 3.0;
      else if (clickCounter >= 12) comboMultiplier = 2.25;
      else if (clickCounter >= 6) comboMultiplier = 1.8;
      else if (clickCounter >= 3) comboMultiplier = 1.4;
      else comboMultiplier = 1.0;

      // Ø¯Ù…Ø¬ Ù…Ø¹ Ø³Ø±Ø¹Ø© Ø§Ù„Ù†Ù‚Ø± (Ø¥Ø°Ø§ Ù†Ù‚Ø± Ø¨Ø³Ø±Ø¹Ø© ÙØ§Ø¦Ù‚Ø©)
      let now = Date.now();
      if (lastClickTime !== 0) {
        let diff = now - lastClickTime;
        if (diff < 150) clickSpeedBonus = 1.3;
        else if (diff < 250) clickSpeedBonus = 1.15;
        else clickSpeedBonus = 1.0;
      } else {
        clickSpeedBonus = 1.0;
      }
      lastClickTime = now;

      let totalMultiplier = (comboMultiplier * clickSpeedBonus);
      // ØªÙ‚Ø±ÙŠØ¨ Ù„Ø±Ù‚Ù…ÙŠÙ†
      totalMultiplier = Math.round(totalMultiplier * 10) / 10;
      comboBonusEl.textContent = `Ã—${totalMultiplier}`;

      // Ø¹Ø±Ø¶ Ø¹Ø¯Ø¯ Ø§Ù„ÙƒÙˆÙ…Ø¨Ùˆ
      comboDisplay.textContent = clickCounter;
      if (clickCounter >= 5) comboDisplay.classList.add('fire');
      else comboDisplay.classList.remove('fire');

      // ØªØ³Ø¬ÙŠÙ„ Ø£Ø¹Ù„Ù‰ ÙƒÙˆÙ…Ø¨Ùˆ
      if (clickCounter > maxCombo) maxCombo = clickCounter;
    }

    // Ø¥Ø¶Ø§ÙØ© Ù†Ù‚Ø§Ø· Ù…Ø¹ Ø§Ù„Ù…Ø¶Ø§Ø¹ÙØ§Øª
    function addScoreWithMultiplier() {
      if (time <= 0) return;
      let nowMultiplier = (comboMultiplier * clickSpeedBonus);
      // Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµØ¹Ø¨: Ù†Ù‚Ø§Ø· Ø£Ù‚Ù„? Ù„Ø§, Ø¨Ù„ ØªØ­Ø¯ÙŠ: ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ØµØ¹Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø· Ù…Ø¶Ø§Ø¹ÙØ© ÙˆÙ„ÙƒÙ† Ø§Ù„ÙˆÙ‚Øª ÙŠÙ†Ù‚Øµ!
      if (hardModeActive) nowMultiplier *= 1.5;  // ØªØ­Ø¯Ù Ø±Ù‡ÙŠØ¨

      let pointsToAdd = Math.round(1 * nowMultiplier); 
      score += pointsToAdd;
      scoreEl.textContent = score;

      // ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ØµØ¹Ø¨: Ø¹Ù‚ÙˆØ¨Ø© Ø²Ù…Ù†ÙŠØ© Ø®ÙÙŠÙØ© (0.07 Ø«Ø§Ù†ÙŠØ©) Ù…Ø¹ ÙƒÙ„ Ø¶ØºØ·Ø© -> ØªØ­Ø¯Ù Ù…Ø¬Ù†ÙˆÙ†
      if (hardModeActive && time > 0.3) {
        time = Math.max(0.1, time - 0.07);
        timeEl.textContent = time.toFixed(1);
        updateProgress();
      }
    }

    // Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ø£ÙƒØ´Ù†
    function handleClick() {
      if (!started) {
        // Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù„Ø¹Ø¨Ø© Ù…Ø¹ Ø£ÙˆÙ„ Ø¶ØºØ·Ø©
        started = true;
        startTimer();
      }

      if (time > 0) {
        // ÙƒÙ„ Ø¶ØºØ·Ø© ØªØ²ÙŠØ¯ Ø§Ù„ÙƒÙˆÙ…Ø¨Ùˆ
        clickCounter++;
        updateComboUI();

        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ù‚Ø§Ø· Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØªØ·ÙˆØ±
        addScoreWithMultiplier();

        // ØµÙˆØª Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ
        playClickSound(clickCounter);

        // ØªØ£Ø«ÙŠØ± Ø§Ù„Ø§Ù‡ØªØ²Ø§Ø² (Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø¬Ù‡Ø§Ø² ÙŠØ¯Ø¹Ù…)
        if (navigator.vibrate) navigator.vibrate(10);

        // ØªØ­Ø¯ÙŠØ« Ø£Ø¹Ù„Ù‰ Ù†ØªÙŠØ¬Ø© Ø¨Ø´ÙƒÙ„ ÙÙˆØ±ÙŠ
        if (score > bestScore) {
          bestScore = score;
          localStorage.setItem('bestScore_Ultimate', bestScore);
          bestEl.textContent = bestScore;
        }
      }
    }

    // Ø¨Ø¯Ø¡ Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ
    function startTimer() {
      if (timerInterval) clearInterval(timerInterval);
      timerInterval = setInterval(() => {
        if (time > 0) {
          time = Math.max(0, time - 0.1);
          timeEl.textContent = time.toFixed(1);
          updateProgress();

          // Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù„Ø¹Ø¨Ø©
          if (time <= 0) {
            time = 0;
            timeEl.textContent = '0.0';
            clearInterval(timerInterval);
            timerInterval = null;
            btn.disabled = true;
            btn.innerHTML = '<i class="fas fa-flag-checkered"></i><span>Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©</span>';
            started = false;

            // ØªØ³Ø¬ÙŠÙ„ Ø£ÙØ¶Ù„ Ù†ØªÙŠØ¬Ø© ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ù†Ù‡Ø§Ø¡
            if (score > bestScore) {
              bestScore = score;
              localStorage.setItem('bestScore_Ultimate', bestScore);
              bestEl.textContent = bestScore;
            }

            // ØµÙˆØª Ø§Ù„Ù†Ù‡Ø§ÙŠØ©
            if (audioCtx) {
              let osc = audioCtx.createOscillator();
              let gain = audioCtx.createGain();
              osc.frequency.value = 300;
              gain.gain.value = 0.1;
              osc.connect(gain);
              gain.connect(audioCtx.destination);
              osc.start();
              osc.stop(0.2);
            }
          }
        } else {
          // Ø£Ù…Ø§Ù†
          clearInterval(timerInterval);
          timerInterval = null;
        }
      }, 100);
    }

    // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
    function updateProgress() {
      let percent = (time / 10) * 100;
      if (percent < 0) percent = 0;
      progressFill.style.width = `${percent}%`;
    }

    // Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· ÙƒØ§Ù…Ù„Ø© Ù„Ù„Ø¹Ø¨Ø©
    function fullReset() {
      clearInterval(timerInterval);
      timerInterval = null;
      started = false;
      score = 0;
      time = 10.0;
      clickCounter = 0;
      comboMultiplier = 1;
      clickSpeedBonus = 1;
      maxCombo = 0;
      lastClickTime = 0;

      scoreEl.textContent = '0';
      timeEl.textContent = '10.0';
      btn.disabled = false;
      btn.innerHTML = '<i class="fas fa-hand-fist"></i><span>Ø§Ù‚Ù‡Ø±Ù†ÙŠ!</span>';
      
      comboDisplay.textContent = '0';
      comboBonusEl.textContent = 'Ã—1.0';
      progressFill.style.width = '100%';
      updateComboUI();

      // Ù„Ø§ Ù†ØºÙŠØ± Ø£ÙØ¶Ù„ Ù†ØªÙŠØ¬Ø©
    }

    // Ø­Ø¯Ø« Ø§Ù„Ø²Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
    btn.addEventListener('click', handleClick);

    // Ø²Ø± Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨
    resetBtn.addEventListener('click', () => {
      fullReset();
    });

    // Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ØµØ¹Ø¨: ÙŠÙÙØ¹Ù„ ØªØ­Ø¯ÙŠØ§Øª Ø¥Ø¶Ø§ÙÙŠØ©
    hardModeBtn.addEventListener('click', function() {
      fullReset();  // Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· ÙƒØ§Ù…Ù„Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªØ¨Ø¯ÙŠÙ„
      hardModeActive = !hardModeActive;
      if (hardModeActive) {
        hardModeBtn.style.background = '#ab2f3f';
        hardModeBtn.style.borderColor = '#ff7e5f';
        hardModeBtn.innerHTML = '<i class="fas fa-skull"></i> Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ØµØ¹Ø¨ Ù…ÙØ¹Ù„';
        // Ù‡Ø¯ÙŠØ©: Ø§Ø¨Ø¯Ø£ Ù…Ø¹ Ù†Ù‚Ø±Ø© Ù…Ø¬Ø§Ù†ÙŠØ©?
      } else {
        hardModeBtn.style.background = 'rgba(20, 40, 60, 0.9)';
        hardModeBtn.style.borderColor = '#ffcd7e';
        hardModeBtn.innerHTML = '<i class="fas fa-skull"></i> Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ØµØ¹Ø¨';
      }
    });

    // Ù…Ù†Ø¹ Ø§Ù„Ù†Ù‚Ø± Ø§Ù„Ù…ØªÙƒØ±Ø± Ø¹Ù†Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ÙˆÙ‚Øª
    // ØªØ­Ø³ÙŠÙ† Ø¥Ø¶Ø§ÙÙŠ: Ø­ÙØ¸ Ø£ÙØ¶Ù„ Ù†ØªÙŠØ¬Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ù†Ù‡Ø§Ø¡

    // Ù…ÙŠØ²Ø© Ø§Ù„Ù„Ù…Ø³ Ù„Ù„Ù‡ÙˆØ§ØªÙ
    window.addEventListener('touchstart', (e) => {
      // Ù„Ø§ ØªÙØ¹Ù„ Ø´ÙŠØ¦Ù‹Ø§ Ø®Ø§ØµÙ‹Ø§
    });

    // Ø§Ù„Ù…Ø¤Ù‚Øª Ù„Ù† ÙŠØ¨Ø¯Ø£ Ø¥Ù„Ø§ Ø¹Ù†Ø¯ Ø£ÙˆÙ„ Ù†Ù‚Ø±Ø© (Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„Ù€ handleClick)

    // Ø¥Ø¶Ø§ÙØ© Ø¯Ø¹Ù… reset Ù„Ù„ÙƒÙˆÙ…Ø¨Ùˆ Ø¹Ù†Ø¯ Ø§Ù„ØªÙˆÙ‚Ù Ù„Ù…Ø¯Ø© Ø£ÙƒØ«Ø± Ù…Ù† 1 Ø«Ø§Ù†ÙŠØ© ØŸ Ø±Ø§Ø¦Ø¹
    let comboDecay;
    window.addEventListener('click', function resetComboIfIdle() {
      clearTimeout(comboDecay);
      comboDecay = setTimeout(() => {
        if (started && time > 0) {
          // Ø¥Ø°Ø§ Ù…Ø±Øª Ø«Ø§Ù†ÙŠØ© Ø¨Ø¯ÙˆÙ† Ù†Ù‚Ø±Ø©ØŒ Ù†Ø¹ÙŠØ¯ Ø§Ù„ÙƒÙˆÙ…Ø¨Ùˆ Ù„Ù„ØµÙØ± (ØªØ­Ø¯ÙŠ)
          clickCounter = 0;
          updateComboUI();
        }
      }, 1100);
    });

    // ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ø±Ø¶ Ø§Ù„ÙˆÙ‚Øª Ø¨Ø´ÙƒÙ„ Ø¹Ø´Ø±ÙŠ
    // Ø¥ØµÙ„Ø§Ø­ Ø£ÙŠ Ø®Ù„Ù„ ÙÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø¨Ø¹Ø¯ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†
    // Ø§Ù„ÙƒÙ„ Ø¬Ø§Ù‡Ø²

    // ØªÙ‡ÙŠØ¦Ø© Ø£ÙˆÙ„ÙŠØ©
    fullReset();
    // Ø¥Ø¸Ù‡Ø§Ø± Ø£ÙØ¶Ù„ Ù†ØªÙŠØ¬Ø© Ù…Ø®Ø²Ù†Ø© Ù…Ù† Ù‚Ø¨Ù„
    bestEl.textContent = bestScore;

    // Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨ 
    console.log('Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ ØµØ§Ù†Ø¹ Ø§Ù„Ø£Ø¨Ø·Ø§Ù„ Ø§Ù„Ù…Ø·ÙˆØ±');
  })();
</script>

<!-- ØªØµÙ…ÙŠÙ… Ù…ØªØ¬Ø§ÙˆØ¨ ÙˆØ´Ø§Ù…Ù„ Ù…Ø¹ Ø£Ø¹Ù„Ù‰ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ù…ØªØ¹Ø© ÙˆØ§Ù„ØªØ­Ø¯ÙŠ -->
</body>
</html>
